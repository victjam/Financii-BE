# name: Deploy to EC2

# on:
#   push:
#     branches:
#       - main

# jobs:
#   deploy:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v3 # Updated to the latest version

#       - name: Set up Python
#         uses: actions/setup-python@v4 # Hypothetically updated version
#         with:
#           python-version: "3.8"

#       - name: Copy files to EC2
#         uses: easingthemes/ssh-deploy@v2.2.0 # Hypothetically updated version
#         env:
#           SSH_PRIVATE_KEY: ${{ secrets.EC2_SSH_KEY }}
#           SOURCE: "."
#           REMOTE_HOST: ${{ secrets.HOST_DNS }}
#           REMOTE_USER: ${{ secrets.USERNAME }}
#           TARGET: "/home/ubuntu/financii-backend"

#       - name: Create .env file on EC2
#         uses: appleboy/ssh-action@master
#         with:
#           host: ${{ secrets.HOST_DNS }}
#           username: ${{ secrets.USERNAME }}
#           key: ${{ secrets.EC2_SSH_KEY }}
#           script: |
#             cd /home/ubuntu/financii-backend
#             echo "DATABASE_URL=${{ secrets.DATABASE_URL }}" > .env
#             echo "API_KEY=${{ secrets.API_KEY }}" >> .env
